(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{488:function(t,a){t.exports="data:image/gif;base64,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"},489:function(t,a,s){t.exports=s.p+"assets/img/rAF-1.3578fc07.gif"},586:function(t,a,s){"use strict";s.r(a);var n=s(55),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"requestanimationframe"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#requestanimationframe"}},[t._v("#")]),t._v(" requestAnimationFrame")]),t._v(" "),n("p",[t._v("我们知道，在web应用中，实现动画有很多方式，比如使用CSS的 "),n("code",[t._v("transition")]),t._v(" 和 "),n("code",[t._v("animation")]),t._v("，或者使用javascript的 "),n("code",[t._v("setTimeout")]),t._v(" 和 "),n("code",[t._v("setInterval")]),t._v("等，然而今天我们要介绍的，则是html5中专门为实现动画设计的API——"),n("code",[t._v("requestAnimationFrame")]),t._v("。我们本节就来学习这个方法，看看它为js动画带来了哪些好处。")]),t._v(" "),n("h2",{attrs:{id:"css-动画原理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#css-动画原理"}},[t._v("#")]),t._v(" CSS 动画原理")]),t._v(" "),n("p",[t._v("在"),n("code",[t._v("requestAnimationFrame")]),t._v("出现以前，js实现动画只能靠定时器。我们给定时器设置延迟时间时，需要考虑这个时间的长短。如果太长了，那么动画就会显得很慢，不流畅；如果太短了，那么浏览器可能渲染能力不够，达不到我们的预期。")]),t._v(" "),n("p",[t._v("这里说的渲染能力，要提一下，大部分的电脑的刷新频率是"),n("code",[t._v("60Hz")]),t._v("，也就是说，电脑屏幕会在一秒内绘制60次，大约相当于每"),n("code",[t._v("1000ms / 60Hz = 16.7")]),t._v("毫秒绘制一次，由于人视觉的残留效果，所以感受不到这种变化，看起来像是连贯的。因此，对于"),n("code",[t._v("60Hz")]),t._v("的显示器来说，"),n("code",[t._v("16.7ms")]),t._v("是最佳的动画间隔，即上一帧到下一帧间隔为"),n("code",[t._v("16.7ms")]),t._v("是最好的。如果超过这个间隔，意味着在下一次刷新的时候，动画还没有执行，看上去的效果就是动画不连贯；如果低于这个时间，也没有意义，因为显示器处理的最短的间隔就是"),n("code",[t._v("16.7ms")]),t._v("，你设置成"),n("code",[t._v("10ms")]),t._v("的话，甚至可能会出现丢帧的情况。")]),t._v(" "),n("h2",{attrs:{id:"requestanimationframe的特点"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#requestanimationframe的特点"}},[t._v("#")]),t._v(" requestAnimationFrame的特点")]),t._v(" "),n("p",[t._v("基于定时器动画带来的上述问题，我们的"),n("code",[t._v("requestAnimationFrame")]),t._v("都帮忙解决了。它为什么这么厉害呢？"),n("strong",[t._v("因为它是由浏览器来决定你的动画执行时机")]),t._v("。试问有谁比浏览器本身更能知道如何最优的执行动画呢？")]),t._v(" "),n("p",[n("strong",[t._v("由浏览器来决定，可以保证你的动画在屏幕每一次的绘制间隔中只被执行一次")]),t._v("。也就是说，你的显示器频率是"),n("code",[t._v("60Hz")]),t._v("，那么你的动画就是"),n("code",[t._v("16.7ms")]),t._v("执行一次；如果是"),n("code",[t._v("50Hz")]),t._v("，那么就是"),n("code",[t._v("20ms")]),t._v("执行一次。免去了我们在定时器中手动执行执行间隔的烦恼，也解决了这样会带来的问题。不仅如此，它还有其他好处：")]),t._v(" "),n("ul",[n("li",[t._v("对于不可见的元素，由"),n("code",[t._v("requestAnimationFrame")]),t._v("指定的动画将会暂停")]),t._v(" "),n("li",[t._v("对于处于后台（非激活）的标签页，动画也会暂停")])]),t._v(" "),n("p",[t._v("这就大大的提升了性能，同时也提高了电池的寿命，因为少了很多无用的执行。")]),t._v(" "),n("h2",{attrs:{id:"使用案例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用案例"}},[t._v("#")]),t._v(" 使用案例")]),t._v(" "),n("p",[t._v("说了这么多，这个神奇的API究竟该怎么用呢？其实很简单，你如果会用定时器的话，你也应该很快就会使用它。我们来看个例子：")]),t._v(" "),n("div",{staticClass:"language-html extra-class"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("progress")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("box"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("0"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("max")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("100"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("progress")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("btn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Run"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}},[n("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" box "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'box'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" btn "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'btn'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" progress "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" val "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" box"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("val "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      box"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestAnimationFrame")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("run"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  btn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'click'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestAnimationFrame")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("run"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("p",[t._v("分析上面的代码，我们可以看出来，其实跟"),n("code",[t._v("setTimeout")]),t._v("差别不是很大，只不过我们没有给它传递时间间隔。我们在点击按钮的时候，利用"),n("code",[t._v("requestAnimationFrame")]),t._v("渲染了第一帧动画，这个"),n("code",[t._v("run")]),t._v("方法中，也包含着这个"),n("code",[t._v("requestAnimationFrame")]),t._v("，所以满足条件的情况下会一直执行，我们来看看效果：")]),t._v(" "),n("img",{staticStyle:{border:"1px solid #eaeaea"},attrs:{alt:"进度条动画",src:s(488)}}),t._v(" "),n("p",[n("em",[t._v("由于录制软件的原因，上面的图显示的动画图可能看上去不是很连贯，读者可以自行尝试一下。")])]),t._v(" "),n("p",[t._v("这个方法与"),n("code",[t._v("setTimeout")]),t._v("类似，返回一个数字"),n("code",[t._v("id")]),t._v("，我们可以使用这个"),n("code",[t._v("id")]),t._v("取消掉这次的动画： "),n("code",[t._v("cancelAnimationFrame(id)")]),t._v("。")]),t._v(" "),n("p",[t._v("还有一个知识点，就是这个"),n("code",[t._v("requestAnimationFrame(callback)")]),t._v("中，这个"),n("code",[t._v("callback")]),t._v("回调函数，有一个默认的参数，它表示当前被"),n("code",[t._v("requestAnimationFrame")]),t._v("排序的回调函数的触发时间。我们修改一下"),n("code",[t._v("run")]),t._v("函数来打印下看看：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ts")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ts"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" val "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" box"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("val "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      box"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestAnimationFrame")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("run"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("结果如图：")]),t._v(" "),n("img",{staticStyle:{border:"1px solid #eaeaea"},attrs:{alt:"进度条动画-打印时间",src:s(489)}}),t._v(" "),n("p",[t._v("我们可以将两次的打印时间计算一下，可以得出刚好是"),n("code",[t._v("16.667")]),t._v("的，豁然开朗有木有。")]),t._v(" "),n("h2",{attrs:{id:"polyfill"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#polyfill"}},[t._v("#")]),t._v(" polyfill")]),t._v(" "),n("p",[t._v("对于不支持"),n("code",[t._v("requestAnimationFrame")]),t._v("的浏览器，我们可以采用如下方法实现向下兼容：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Adapted from https://gist.github.com/paulirish/1579671 which derived from ")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// http://paulirish.com/2011/requestanimationframe-for-smart-animating/")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// requestAnimationFrame polyfill by Erik Möller.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Fixes from Paul Irish, Tino Zijdel, Andrew Mao, Klemen Slavič, Darius Bacon")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// MIT license")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("Date"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("now"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    Date"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("now")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTime")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'use strict'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" vendors "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'webkit'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'moz'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" vendors"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("requestAnimationFrame"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" vp "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" vendors"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("requestAnimationFrame "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("vp"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'RequestAnimationFrame'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cancelAnimationFrame "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("vp"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'CancelAnimationFrame'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n                                   "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("vp"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'CancelRequestAnimationFrame'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/iP(ad|hone|od).*OS 6/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("navigator"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("userAgent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// iOS6 is buggy")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("requestAnimationFrame "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cancelAnimationFrame"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 上一次动画的执行时间")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" lastTime "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("requestAnimationFrame")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("callback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 当前时间 ")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" now "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Date"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("now")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 比较上一次时间+16ms后，和当前时间的大小，取较大的值")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" nextTime "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Math"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("max")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("lastTime "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" now"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("lastTime "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" nextTime"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                              nextTime "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" now"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cancelAnimationFrame "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" clearTimeout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])])]),n("p",[t._v("代码来源："),n("a",{attrs:{href:"https://github.com/darius/requestAnimationFrame",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/darius/requestAnimationFrame"),n("OutboundLink")],1)]),t._v(" "),n("h3",{attrs:{id:"参考资料"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[t._v("#")]),t._v(" 参考资料")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://www.cnblogs.com/onepixel/p/7078617.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.cnblogs.com/onepixel/p/7078617.html"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame"),n("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=e.exports}}]);