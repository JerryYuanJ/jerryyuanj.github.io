<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>DevServer | Jerry ä¸ªäººåšå®¢</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/logo.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <script>
      (function() {
        var mta = document.createElement("script");
        mta.src = "//pingjs.qq.com/h5/stats.js?v2.0.4";
        mta.setAttribute("name", "MTAH5");
        mta.setAttribute("sid", "500708667");
        mta.setAttribute("cid", "500708668");
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(mta, s);
      })();
    </script>
    <script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <meta name="description" content="Jerry's blog">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    <link rel="preload" href="/assets/css/0.styles.06744937.css" as="style"><link rel="preload" href="/assets/js/app.60e74413.js" as="script"><link rel="preload" href="/assets/js/14.69f023c0.js" as="script"><link rel="preload" href="/assets/js/2.720ba71e.js" as="script"><link rel="preload" href="/assets/js/6.95b28193.js" as="script"><link rel="prefetch" href="/assets/js/10.4356ad27.js"><link rel="prefetch" href="/assets/js/100.c99580b9.js"><link rel="prefetch" href="/assets/js/101.356781a9.js"><link rel="prefetch" href="/assets/js/11.b045add9.js"><link rel="prefetch" href="/assets/js/12.aeedaf60.js"><link rel="prefetch" href="/assets/js/13.fb627b38.js"><link rel="prefetch" href="/assets/js/15.9fedbce0.js"><link rel="prefetch" href="/assets/js/16.1a7de72a.js"><link rel="prefetch" href="/assets/js/17.fa224a6a.js"><link rel="prefetch" href="/assets/js/18.1a72bef8.js"><link rel="prefetch" href="/assets/js/19.e11c0116.js"><link rel="prefetch" href="/assets/js/20.6a6f73dd.js"><link rel="prefetch" href="/assets/js/21.56a777d3.js"><link rel="prefetch" href="/assets/js/22.6773a84c.js"><link rel="prefetch" href="/assets/js/23.136061fb.js"><link rel="prefetch" href="/assets/js/24.7d1837f0.js"><link rel="prefetch" href="/assets/js/25.31ab58df.js"><link rel="prefetch" href="/assets/js/26.a5e7b497.js"><link rel="prefetch" href="/assets/js/27.9609abfa.js"><link rel="prefetch" href="/assets/js/28.bbb9cd06.js"><link rel="prefetch" href="/assets/js/29.8892b17d.js"><link rel="prefetch" href="/assets/js/3.b7eab624.js"><link rel="prefetch" href="/assets/js/30.74b203cc.js"><link rel="prefetch" href="/assets/js/31.f8502b39.js"><link rel="prefetch" href="/assets/js/32.4a6fdb4c.js"><link rel="prefetch" href="/assets/js/33.06378ca2.js"><link rel="prefetch" href="/assets/js/34.0060ef5f.js"><link rel="prefetch" href="/assets/js/35.1635574b.js"><link rel="prefetch" href="/assets/js/36.ba0ea7aa.js"><link rel="prefetch" href="/assets/js/37.1fe72493.js"><link rel="prefetch" href="/assets/js/38.6140df13.js"><link rel="prefetch" href="/assets/js/39.75defbda.js"><link rel="prefetch" href="/assets/js/4.99432b89.js"><link rel="prefetch" href="/assets/js/40.95f6174a.js"><link rel="prefetch" href="/assets/js/41.edc39790.js"><link rel="prefetch" href="/assets/js/42.9dcf7ed0.js"><link rel="prefetch" href="/assets/js/43.027f7ff4.js"><link rel="prefetch" href="/assets/js/44.a7fa2c02.js"><link rel="prefetch" href="/assets/js/45.3bd0a364.js"><link rel="prefetch" href="/assets/js/46.6682a04b.js"><link rel="prefetch" href="/assets/js/47.a61c377c.js"><link rel="prefetch" href="/assets/js/48.1f4bbd9a.js"><link rel="prefetch" href="/assets/js/49.7f23a237.js"><link rel="prefetch" href="/assets/js/5.406f67b1.js"><link rel="prefetch" href="/assets/js/50.2a56a559.js"><link rel="prefetch" href="/assets/js/51.bb97c3da.js"><link rel="prefetch" href="/assets/js/52.446d5740.js"><link rel="prefetch" href="/assets/js/53.e8184b0c.js"><link rel="prefetch" href="/assets/js/54.c9a5e3ed.js"><link rel="prefetch" href="/assets/js/55.97bb4c63.js"><link rel="prefetch" href="/assets/js/56.cb3d973f.js"><link rel="prefetch" href="/assets/js/57.37f3fb00.js"><link rel="prefetch" href="/assets/js/58.0d7c2f4b.js"><link rel="prefetch" href="/assets/js/59.4a2f6def.js"><link rel="prefetch" href="/assets/js/60.b2a604a0.js"><link rel="prefetch" href="/assets/js/61.debbb7b9.js"><link rel="prefetch" href="/assets/js/62.0bd56b0e.js"><link rel="prefetch" href="/assets/js/63.57bf8cbe.js"><link rel="prefetch" href="/assets/js/64.41c1fb35.js"><link rel="prefetch" href="/assets/js/65.f53d1b42.js"><link rel="prefetch" href="/assets/js/66.566689b9.js"><link rel="prefetch" href="/assets/js/67.f5cf077d.js"><link rel="prefetch" href="/assets/js/68.95bc1b6c.js"><link rel="prefetch" href="/assets/js/69.bdc844a1.js"><link rel="prefetch" href="/assets/js/7.6619bfc9.js"><link rel="prefetch" href="/assets/js/70.94a6894a.js"><link rel="prefetch" href="/assets/js/71.4e9ddb06.js"><link rel="prefetch" href="/assets/js/72.2c8413d7.js"><link rel="prefetch" href="/assets/js/73.64fdac61.js"><link rel="prefetch" href="/assets/js/74.a6f66ae3.js"><link rel="prefetch" href="/assets/js/75.9e940b3a.js"><link rel="prefetch" href="/assets/js/76.7e0d8e19.js"><link rel="prefetch" href="/assets/js/77.c67342fb.js"><link rel="prefetch" href="/assets/js/78.a5bd97d1.js"><link rel="prefetch" href="/assets/js/79.3a3e3541.js"><link rel="prefetch" href="/assets/js/8.d0a8a3ed.js"><link rel="prefetch" href="/assets/js/80.97620f66.js"><link rel="prefetch" href="/assets/js/81.0d8341aa.js"><link rel="prefetch" href="/assets/js/82.0d309601.js"><link rel="prefetch" href="/assets/js/83.6123aeae.js"><link rel="prefetch" href="/assets/js/84.00b21399.js"><link rel="prefetch" href="/assets/js/85.d22ae4f9.js"><link rel="prefetch" href="/assets/js/86.a79065fe.js"><link rel="prefetch" href="/assets/js/87.01664722.js"><link rel="prefetch" href="/assets/js/88.1cb8429e.js"><link rel="prefetch" href="/assets/js/89.a36be8c5.js"><link rel="prefetch" href="/assets/js/9.f2277063.js"><link rel="prefetch" href="/assets/js/90.ebfec47e.js"><link rel="prefetch" href="/assets/js/91.47f73c78.js"><link rel="prefetch" href="/assets/js/92.4ae86837.js"><link rel="prefetch" href="/assets/js/93.8bbf0769.js"><link rel="prefetch" href="/assets/js/94.8f1e3309.js"><link rel="prefetch" href="/assets/js/95.ea1c2085.js"><link rel="prefetch" href="/assets/js/96.08475163.js"><link rel="prefetch" href="/assets/js/97.a8c7442e.js"><link rel="prefetch" href="/assets/js/98.9d7ce618.js"><link rel="prefetch" href="/assets/js/99.eb0c7f6a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.06744937.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Jerry ä¸ªäººåšå®¢</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/algorithm/" class="nav-link">
  ç®—æ³•
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å‰ç«¯åŸºç¡€" class="dropdown-title"><span class="title">å‰ç«¯åŸºç¡€</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/basic/js/index.html" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/basic/css/index.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/basic/html/index.html" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/http/index.html" class="nav-link">
  HTTP
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue ç³»åˆ—" class="dropdown-title"><span class="title">Vue ç³»åˆ—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tools/vue/vue2/index.html" class="nav-link">
  Vue 2
</a></li><li class="dropdown-item"><!----> <a href="/tools/vue/vue3/index.html" class="nav-link">
  Vue 3
</a></li><li class="dropdown-item"><!----> <a href="/tools/vue/vuex/index.html" class="nav-link">
  Vuex
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æºç ç²¾è¯»" class="dropdown-title"><span class="title">æºç ç²¾è¯»</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tools/snabbdom/index.html" class="nav-link">
  Snabbdom
</a></li><li class="dropdown-item"><!----> <a href="/tools/axios/index.html" class="nav-link">
  Axios
</a></li></ul></div></div><div class="nav-item"><a href="/backend/" class="nav-link">
  æŠ€èƒ½æ‹“å±•
</a></div><div class="nav-item"><a href="/tools/webpack/" class="nav-link router-link-active">
  Webpack
</a></div><div class="nav-item"><a href="/about/" class="nav-link">
  About Me
</a></div> <a href="https://github.com/JerryYuanJ/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/algorithm/" class="nav-link">
  ç®—æ³•
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å‰ç«¯åŸºç¡€" class="dropdown-title"><span class="title">å‰ç«¯åŸºç¡€</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/basic/js/index.html" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/basic/css/index.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/basic/html/index.html" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/http/index.html" class="nav-link">
  HTTP
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue ç³»åˆ—" class="dropdown-title"><span class="title">Vue ç³»åˆ—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tools/vue/vue2/index.html" class="nav-link">
  Vue 2
</a></li><li class="dropdown-item"><!----> <a href="/tools/vue/vue3/index.html" class="nav-link">
  Vue 3
</a></li><li class="dropdown-item"><!----> <a href="/tools/vue/vuex/index.html" class="nav-link">
  Vuex
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æºç ç²¾è¯»" class="dropdown-title"><span class="title">æºç ç²¾è¯»</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tools/snabbdom/index.html" class="nav-link">
  Snabbdom
</a></li><li class="dropdown-item"><!----> <a href="/tools/axios/index.html" class="nav-link">
  Axios
</a></li></ul></div></div><div class="nav-item"><a href="/backend/" class="nav-link">
  æŠ€èƒ½æ‹“å±•
</a></div><div class="nav-item"><a href="/tools/webpack/" class="nav-link router-link-active">
  Webpack
</a></div><div class="nav-item"><a href="/about/" class="nav-link">
  About Me
</a></div> <a href="https://github.com/JerryYuanJ/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>é…ç½®å¤§å…¨</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tools/webpack/entry-context.html" class="sidebar-link">entry å’Œ context</a></li><li><a href="/tools/webpack/output.html" class="sidebar-link">output</a></li><li><a href="/tools/webpack/dev-server.html" aria-current="page" class="active sidebar-link">devServer</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tools/webpack/dev-server.html#å®‰è£…" class="sidebar-link">å®‰è£…</a></li><li class="sidebar-sub-header"><a href="/tools/webpack/dev-server.html#é…ç½®" class="sidebar-link">é…ç½®</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tools/webpack/dev-server.html#port-ğŸ”‘" class="sidebar-link">port ğŸ”‘</a></li><li class="sidebar-sub-header"><a href="/tools/webpack/dev-server.html#open-ğŸ”‘" class="sidebar-link">open ğŸ”‘</a></li><li class="sidebar-sub-header"><a href="/tools/webpack/dev-server.html#openpage" class="sidebar-link">openPage</a></li><li class="sidebar-sub-header"><a href="/tools/webpack/dev-server.html#compress" class="sidebar-link">compress</a></li><li class="sidebar-sub-header"><a href="/tools/webpack/dev-server.html#writetodisk" class="sidebar-link">writeToDisk</a></li><li class="sidebar-sub-header"><a href="/tools/webpack/dev-server.html#onlistening" class="sidebar-link">onListening</a></li><li class="sidebar-sub-header"><a href="/tools/webpack/dev-server.html#before-ğŸ”‘" class="sidebar-link">before ğŸ”‘</a></li><li class="sidebar-sub-header"><a href="/tools/webpack/dev-server.html#after" class="sidebar-link">after</a></li><li class="sidebar-sub-header"><a href="/tools/webpack/dev-server.html#clientloglevel" class="sidebar-link">clientLogLevel</a></li><li class="sidebar-sub-header"><a href="/tools/webpack/dev-server.html#overlay" class="sidebar-link">overlay</a></li><li class="sidebar-sub-header"><a href="/tools/webpack/dev-server.html#quiet" class="sidebar-link">quiet</a></li><li class="sidebar-sub-header"><a href="/tools/webpack/dev-server.html#noinfo" class="sidebar-link">noInfo</a></li><li class="sidebar-sub-header"><a href="/tools/webpack/dev-server.html#stats" class="sidebar-link">stats</a></li><li class="sidebar-sub-header"><a href="/tools/webpack/dev-server.html#inline-ğŸ”‘" class="sidebar-link">inline ğŸ”‘</a></li><li class="sidebar-sub-header"><a href="/tools/webpack/dev-server.html#public" class="sidebar-link">public</a></li><li class="sidebar-sub-header"><a href="/tools/webpack/dev-server.html#publicpath-ğŸ”‘" class="sidebar-link">publicPath ğŸ”‘</a></li><li class="sidebar-sub-header"><a href="/tools/webpack/dev-server.html#https" class="sidebar-link">https</a></li><li class="sidebar-sub-header"><a href="/tools/webpack/dev-server.html#http2" class="sidebar-link">http2</a></li><li class="sidebar-sub-header"><a href="/tools/webpack/dev-server.html#index" class="sidebar-link">index</a></li><li class="sidebar-sub-header"><a href="/tools/webpack/dev-server.html#allowedhosts" class="sidebar-link">allowedHosts</a></li><li class="sidebar-sub-header"><a href="/tools/webpack/dev-server.html#disablehostcheck" class="sidebar-link">disableHostCheck</a></li><li class="sidebar-sub-header"><a href="/tools/webpack/dev-server.html#host-ğŸ”‘" class="sidebar-link">host ğŸ”‘</a></li><li class="sidebar-sub-header"><a href="/tools/webpack/dev-server.html#uselocalip" class="sidebar-link">useLocalIp</a></li><li class="sidebar-sub-header"><a href="/tools/webpack/dev-server.html#hot-ğŸ”‘" class="sidebar-link">hot ğŸ”‘</a></li><li class="sidebar-sub-header"><a href="/tools/webpack/dev-server.html#hotonly-ğŸ”‘" class="sidebar-link">hotOnly ğŸ”‘</a></li><li class="sidebar-sub-header"><a href="/tools/webpack/dev-server.html#contentbase-ğŸ”‘" class="sidebar-link">contentBase ğŸ”‘</a></li><li class="sidebar-sub-header"><a href="/tools/webpack/dev-server.html#contentbasepublicpath-ğŸ”‘" class="sidebar-link">contentBasePublicPath ğŸ”‘</a></li><li class="sidebar-sub-header"><a href="/tools/webpack/dev-server.html#watchcontentbase" class="sidebar-link">watchContentBase</a></li><li class="sidebar-sub-header"><a href="/tools/webpack/dev-server.html#watchoptions" class="sidebar-link">watchOptions</a></li><li class="sidebar-sub-header"><a href="/tools/webpack/dev-server.html#headers" class="sidebar-link">headers</a></li><li class="sidebar-sub-header"><a href="/tools/webpack/dev-server.html#livereload" class="sidebar-link">liveReload</a></li><li class="sidebar-sub-header"><a href="/tools/webpack/dev-server.html#socket-ç›¸å…³" class="sidebar-link">socket ç›¸å…³</a></li><li class="sidebar-sub-header"><a href="/tools/webpack/dev-server.html#historyapifallback-ğŸ”‘" class="sidebar-link">historyApiFallback ğŸ”‘</a></li><li class="sidebar-sub-header"><a href="/tools/webpack/dev-server.html#proxy-ğŸ”‘" class="sidebar-link">proxy ğŸ”‘</a></li></ul></li></ul></li><li><a href="/tools/webpack/performance.html" class="sidebar-link">performance</a></li><li><a href="/tools/webpack/watch.html" class="sidebar-link">watch å’Œ watchOptions</a></li><li><a href="/tools/webpack/resolve.html" class="sidebar-link">resolve å’Œ resolveLoader</a></li><li><a href="/tools/webpack/externals.html" class="sidebar-link">externals å’Œ externalsType</a></li><li><a href="/tools/webpack/module.html" class="sidebar-link">module</a></li><li><a href="/tools/webpack/optimization.html" class="sidebar-link">optimization</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>ä¼˜åŒ–æŠ€å·§</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tools/webpack/optimize.html" class="sidebar-link">Webpackä¼˜åŒ–æŠ€å·§</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>è¿›é˜¶å­¦ä¹ </span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tools/webpack/tappable.html" class="sidebar-link">äº‹ä»¶ç³»ç»Ÿçš„æ ¸å¿ƒ - Tappable</a></li><li><a href="/tools/webpack/hashes.html" class="sidebar-link">hash, chunkhash å’Œ contenthash</a></li><li><a href="/tools/webpack/loader.html" class="sidebar-link">Webpack Loader</a></li><li><a href="/tools/webpack/plugin.html" class="sidebar-link">Webpack Plugin</a></li></ul></section></li></ul> <div class="adsense-content" data-v-8d82fd90><div style="padding: 2rem" data-v-8d82fd90></div></div></aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="devserver"><a href="#devserver" class="header-anchor">#</a> DevServer</h1> <p>åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œåˆ©ç”¨åˆç†çš„ <code>devServer</code> é…ç½®ï¼Œå¯ä»¥æœ‰æ•ˆçš„æé«˜æˆ‘ä»¬çš„å·¥ä½œæ•ˆç‡ã€‚æœ¬èŠ‚æˆ‘ä»¬å°±æ¥çœ‹çœ‹å¦‚æœå¯¹ <code>devServer</code> è¿›è¡Œé…ç½®ã€‚</p> <h2 id="å®‰è£…"><a href="#å®‰è£…" class="header-anchor">#</a> å®‰è£…</h2> <p>åœ¨ä»‹ç»å…·ä½“å†…å®¹ä¹‹å‰ï¼Œä½ éœ€è¦å…ˆå®‰è£…è¿™ä¸ªåŒ…ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>npm install webpack-dev-server
</code></pre></div><p>æ¥ç€é…ç½®ä¸€ä¸ª npm script å³å¯ï¼š</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack-dev-server&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æœ€åæ‰§è¡Œ <code>npm run dev</code>ï¼Œä½ çš„åº”ç”¨å°±æˆåŠŸçš„è¿è¡Œåœ¨è¿™ä¸ªå¼€å‘æœåŠ¡å™¨ä¸Šäº†ã€‚è¿™æ—¶å€™å¦‚æœä½ æ²¡æœ‰åœ¨ webpack é…ç½®æ–‡ä»¶ä¸­é…ç½® devServer å±æ€§çš„è¯ï¼Œä¼šé‡‡ç”¨å®ƒçš„é»˜è®¤é…ç½®ï¼Œæ¯”å¦‚é»˜è®¤ç«¯å£æ˜¯ 8080 ç­‰ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ç»†è¯´å®ƒçš„å„é¡¹é…ç½®ã€‚</p> <h2 id="é…ç½®"><a href="#é…ç½®" class="header-anchor">#</a> é…ç½®</h2> <h3 id="port-ğŸ”‘"><a href="#port-ğŸ”‘" class="header-anchor">#</a> port ğŸ”‘</h3> <p>æœåŠ¡å™¨è¿è¡Œçš„ç«¯å£å·ï¼Œé»˜è®¤ 8080ã€‚</p> <h3 id="open-ğŸ”‘"><a href="#open-ğŸ”‘" class="header-anchor">#</a> open ğŸ”‘</h3> <p>æ˜¯å¦è‡ªåŠ¨çš„æ‰“å¼€æµè§ˆå™¨ã€‚è®¾ç½®ä¸º true çš„è¯ï¼Œä¼šè‡ªåŠ¨çš„æ‰“å¼€ä½ çš„<strong>é»˜è®¤æµè§ˆå™¨</strong>ã€‚</p> <p>å¦‚æœä½ æƒ³æ‰“å¼€æŒ‡å®šæµè§ˆå™¨çš„è¯ï¼Œæ¯”å¦‚ä½ åœ¨ Mac OS ä¸Šæƒ³é»˜è®¤æ‰“å¼€ Firefoxï¼Œä½ å¯ä»¥è®¾ç½®ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
  open<span class="token operator">:</span> <span class="token string">'Firefox'</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>æ³¨æ„ï¼Œè¿™é‡Œçš„æµè§ˆå™¨åç§°éœ€è¦æ˜¯ä½ æœ¬åœ° app çš„åç§°ï¼Œæ¯”å¦‚è°·æ­Œæµè§ˆå™¨åœ¨ Mac ä¸Šå«åš Google Chromeï¼Œåœ¨ Windows ä¸Šå«åš chromeã€‚</p></div> <p>åœ¨ <strong>webpack V5</strong> ä¸­ï¼Œä½ ä¹Ÿå¯ä»¥æŒ‡å®š open å±æ€§ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒçš„é…ç½®å’Œ <a href="https://www.npmjs.com/package/open" target="_blank" rel="noopener noreferrer">open<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ä¸€æ ·ï¼Œæ¯”å¦‚æˆ‘è¦é…ç½®é»˜è®¤æ‰“å¼€ Chrome æµè§ˆå™¨ï¼Œå¹¶ä¸”å¼€å¯éšç§æ¨¡å¼ï¼Œä½ å¯ä»¥è¿™ä¹ˆè®¾ç½®ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
  open<span class="token operator">:</span> <span class="token punctuation">{</span>
    app<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'Google Chrome'</span><span class="token punctuation">,</span> <span class="token string">'--incognito'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="openpage"><a href="#openpage" class="header-anchor">#</a> openPage</h3> <p>å½“æ‰“å¼€æµè§ˆå™¨çš„æ—¶å€™ï¼ŒæŒ‡å®šè¦æ‰“å¼€çš„é¡µé¢ã€‚å®ƒå¯ä»¥æ˜¯å­—ç¬¦ä¸²ç±»å‹çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯æ•°ç»„ï¼Œè¡¨ç¤ºè¦æ‰“å¼€ä¸€ç»„é¡µé¢ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
  openPage<span class="token operator">:</span> <span class="token string">'index.html'</span><span class="token punctuation">,</span>
  <span class="token comment">// openPage: ['index.html', 'login.html'],</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="compress"><a href="#compress" class="header-anchor">#</a> compress</h3> <p>å¯ç”¨ gizp å‹ç¼©ã€‚å®ƒæ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
  compress<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å½“ä½ è®¾ç½®ä¸º true æ—¶ï¼Œå“åº”å¤´ä¼šå¤šå‡ºå¦‚ä¸‹å­—æ®µï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>Content-Encoding: gzip
</code></pre></div><h3 id="writetodisk"><a href="#writetodisk" class="header-anchor">#</a> writeToDisk</h3> <p>æ˜¯å¦å°†æ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶å†™å…¥åˆ°ç¡¬ç›˜ä¸­ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œå¼€å‘æœåŠ¡å™¨ä¸‹çš„ç”Ÿæˆæ–‡ä»¶æ˜¯åœ¨å†…å­˜ä¸­çš„ï¼Œå¦‚æœä½ æƒ³åœ¨æœ¬åœ°çœ‹åˆ°å¼€å‘ç¯å¢ƒä¸‹æ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶æ˜¯å•¥æ ·çš„ï¼Œå¯ä»¥å°†å®ƒè®¾ç½®ä¸º trueã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
  writeToDisk<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>å®ƒä¼šå°†ç”Ÿæˆçš„æ–‡ä»¶æ”¾åœ¨ output.path ä¸­é…ç½®çš„è·¯å¾„ä¸­</strong>ã€‚å®ƒçš„å€¼ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°æ¥æ”¶ä¸€ä¸ªæ–‡ä»¶è·¯å¾„ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼æ¥å†³å®šè¿™ä¸ªæ–‡ä»¶è¦ä¸è¦å†™è¿›ç¡¬ç›˜ï¼Œä¾‹å¦‚ä¸‹é¢çš„é…ç½®ï¼Œå°±åªå°† js æ–‡ä»¶å†™è¿›ç¡¬ç›˜ä¸­ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">writeToDisk</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">filePath</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">/</span>\<span class="token punctuation">.</span>js$<span class="token operator">/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="onlistening"><a href="#onlistening" class="header-anchor">#</a> onListening</h3> <p>å½“ webpack-dev-server å¼€å§‹ç›‘å¬ç«¯å£ä¸Šçš„è¿æ¥æ—¶ï¼Œè¦æ‰§è¡Œçš„æ“ä½œã€‚ä»–æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">onListening</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">server</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> port <span class="token operator">=</span> server<span class="token punctuation">.</span>listeningApp<span class="token punctuation">.</span><span class="token function">address</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>port<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Listening on port:'</span><span class="token punctuation">,</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="before-ğŸ”‘"><a href="#before-ğŸ”‘" class="header-anchor">#</a> before ğŸ”‘</h3> <p>å®ƒæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨ webpack-dev-server æ‰€æœ‰çš„å†…ç½®ä¸­é—´ä»¶æ‰§è¡Œå‰æ‰§è¡Œã€‚æˆ‘ä»¬å¯ä»¥åœ¨å‡½æ•°ä¸­åšå¾ˆå¤šæœ‰æ„æ€çš„äº‹ï¼Œæ¯”å¦‚æ•°æ® mockç­‰ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">before</span><span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/api/user/1'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'Jerry'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¸Šé¢çš„ä»£ç ï¼Œç›¸å½“äº mock äº†ä¸€ä¸ª <code>/api/user/1</code> çš„æ¥å£ï¼Œå®ƒè¿”å›ä¸€ä¸ª json å¯¹è±¡ã€‚ä½ å¯ä»¥åœ¨ä½ çš„ä¸šåŠ¡ä»£ç ä¸­è°ƒç”¨è¿™ä¸ªæ¥å£ï¼Œä¾‹å¦‚é€šè¿‡ axios è¯·æ±‚ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/api/user/1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// handle res</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="after"><a href="#after" class="header-anchor">#</a> after</h3> <p>å®ƒä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨ dev-server å†…éƒ¨ä¸­é—´ä»¶æ‰§è¡Œå®Œä¹‹åæ‰§è¡Œã€‚ä½ ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œè¿›è¡Œæ•°æ® mockï¼Œè¿™é‡Œå°±ä¸å¤šè§£é‡Šäº†ã€‚å®ƒå’Œ before ç›¸å½“äºä¸¤ä¸ªé’©å­ï¼Œä¸€ä¸ªåœ¨ dev-server æ‰€æœ‰å†…ç½®ä¸­é—´ä»¶æ‰§è¡Œå‰æ‰§è¡Œï¼Œä¸€ä¸ªåœ¨ dev-server æ‰€æœ‰å†…ç½®ä¸­é—´ä»¶æ‰§è¡Œä¹‹åæ‰§è¡Œã€‚</p> <h3 id="clientloglevel"><a href="#clientloglevel" class="header-anchor">#</a> clientLogLevel</h3> <p>è®¾ç½®ä½  DevTool ä¸Šæ§åˆ¶å°çš„æ—¥å¿—çº§åˆ«ã€‚æˆ‘ä»¬åœ¨æµè§ˆå™¨çš„æ§åˆ¶å°ä¸Šï¼Œç»å¸¸ä¼šçœ‹åˆ°ä¸€äº›æ—¥å¿—ä¿¡æ¯æˆ–è€…ä¸€äº›ç¼–è¯‘è­¦å‘Šæˆ–è€…é”™è¯¯ä¿¡æ¯ï¼Œæ¯”å¦‚ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>[WDS] App updated. Recompiling...
[WDS] App hot update...
[HMR] Checking for updates on the server...
[HMR] Nothing hot updated.
[HMR] App is up to date.
</code></pre></div><p>ä½ å¯ä»¥é€šè¿‡è®¾ç½®ä¸åŒçš„çº§åˆ«æ¥é™åˆ¶æ§åˆ¶å°çš„è¾“å‡ºï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
  clientLogLevel<span class="token operator">:</span> <span class="token string">'error'</span> <span class="token comment">// åªæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç±»ä¼¼çš„çº§åˆ«è¿˜æœ‰ infoï¼Œdebugï¼Œwarn ç­‰ã€‚<strong>å¦‚æœä½ å«Œæ—¥å¿—å¤ªå¤šå¾ˆçƒ¦ï¼Œé‚£ä¹ˆå¯ä»¥è®¾ç½®ä¸º <code>silent</code> æ¥å…³æ‰æ—¥å¿—ï¼ˆä½†æ˜¯é”™è¯¯ä¿¡æ¯è¿˜æ˜¯ä¼šå±•ç¤ºï¼‰ã€‚</strong></p> <h3 id="overlay"><a href="#overlay" class="header-anchor">#</a> overlay</h3> <p>å½“ <strong>ç¼–è¯‘æŠ¥è­¦å‘Šæˆ–è€…å‡ºé”™</strong> çš„æ—¶å€™ï¼Œæ˜¯å¦åœ¨æµè§ˆå™¨ä¸Šæ˜¾ç¤ºä¸€ä¸ªå…¨å±çš„é®å±‚æ¥å±•ç¤ºè¿™äº›ä¿¡æ¯ã€‚æ³¨æ„è¿™é‡Œæ˜¾ç¤ºçš„ç¼–è¯‘ç›¸å…³çš„ä¿¡æ¯ï¼Œæ¯”å¦‚ä½ çš„ä»£ç ä¸ç¬¦åˆæŸä¸ª eslint æ ‡å‡†ï¼Œæˆ–è€…ä»£ç å°‘ä¸ªæ‹¬å·ç­‰ä¼šå¼•èµ·ç¼–è¯‘å‡ºé”™çš„æ—¶å€™ã€‚æ¯”å¦‚å¦‚ä¸‹ä»£ç ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'hello'</span>
</code></pre></div><p>ä¼šæŠ¥é”™ï¼š</p> <p><img src="/assets/img/compile_error.5c964ed5.png" alt="compile error"></p> <p>å½“è®¾ç½®ä¸º true çš„æ—¶å€™ï¼Œåªä¼šæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ã€‚å¦‚æœä½ æƒ³æ˜¾ç¤ºè­¦å‘Šä¿¡æ¯å’Œé”™è¯¯ä¿¡æ¯çš„è¯ï¼Œå¯ä»¥è®¾ç½®æˆä¸€ä¸ªå¯¹è±¡ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
  overlay<span class="token operator">:</span> <span class="token punctuation">{</span>
    warnings<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    errors<span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="quiet"><a href="#quiet" class="header-anchor">#</a> quiet</h3> <p>æˆ‘ä»¬çŸ¥é“ï¼Œå½“è¿è¡Œ <code>npm run dev</code> æ—¶ï¼Œå‘½ä»¤è¡Œä¼šæ‰“å°å‡ºå¾ˆå¤šæ—¥å¿—ï¼š</p> <p><img src="/assets/img/console_info.22902bf7.png" alt="console info"></p> <p>ä½ å¯ä»¥é€šè¿‡è®¾ç½® quiet ä¸º true æ¥ç¦ç”¨æ‰æ—¥å¿—ã€‚<strong>æ³¨æ„ï¼Œæ­¤æ—¶è­¦å‘Šå’Œé”™è¯¯ä¿¡æ¯ä¹Ÿä¸ä¼šæ˜¾ç¤ºäº†ï¼Œæ‰€ä»¥è¿™ä¸ªå±æ€§è¿˜æ˜¯æ…ç”¨ã€‚</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
  quiet<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/assets/img/console_quiet.6137d58a.png" alt="console quiet"></p> <h3 id="noinfo"><a href="#noinfo" class="header-anchor">#</a> noInfo</h3> <p>å®ƒä¹Ÿæ˜¯ä¸€ä¸ªæ—¥å¿—è¾“å‡ºçš„æ§åˆ¶ã€‚noInfo çš„ä½œç”¨æ˜¯ä¸è¾“å‡º webpack çš„æ‰“åŒ…ä¿¡æ¯ï¼Œä½†æ˜¯å¯¹äºé”™è¯¯å’Œè­¦å‘Šè¿˜æ˜¯ä¼šè¾“å‡ºçš„ã€‚å…³äºå®ƒå’Œ quiet çš„ä¼˜å…ˆçº§ï¼Œè¯»è€…å¯ä»¥è‡ªè¡Œå°è¯•ä¸€ä¸‹ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
  noInfo<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/assets/img/console_noinfo.f9747294.png" alt="console info noinfo"></p> <h3 id="stats"><a href="#stats" class="header-anchor">#</a> stats</h3> <p><strong>è¿™ä¸ªé€‰é¡¹å¯ä»¥è®©ä½ ç²¾ç¡®åœ°æ§åˆ¶æ˜¾ç¤ºä»€ä¹ˆ bundle ä¿¡æ¯ï¼Œå®ƒæ˜¯ç”¨æ¥æ§åˆ¶ bundle ä¿¡æ¯çš„æ˜¾ç¤ºçš„ã€‚</strong> å¦‚æœä½ ä¸æƒ³ä½¿ç”¨ noInfo å’Œ quiet æ¥é…ç½®çš„è¯ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚ä½ å¯ä»¥å‚è€ƒ <a href="https://webpack.js.org/configuration/stats/" target="_blank" rel="noopener noreferrer">stats<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> é…ç½®æ¥æ›´è¿›ä¸€æ­¥çš„äº†è§£ã€‚æ¯”å¦‚ä½ åªæƒ³çœ‹åˆ° bundle çš„é”™è¯¯ä¿¡æ¯ï¼Œé‚£ä¹ˆå¯ä»¥é…ç½®ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
  stats<span class="token operator">:</span> <span class="token string">'errors-only'</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>æ³¨æ„ï¼Œå®ƒåœ¨ä¸ quiet æˆ– noInfo ä¸€èµ·ä½¿ç”¨æ—¶ä¸èµ·ä½œç”¨ã€‚</strong></p> <h3 id="inline-ğŸ”‘"><a href="#inline-ğŸ”‘" class="header-anchor">#</a> inline ğŸ”‘</h3> <p>inline = true, inline æ¨¡å¼ï¼›inline = falseï¼Œiframe æ¨¡å¼ã€‚</p> <p><strong>devServer çš„å®æ—¶é¢„è§ˆåŠŸèƒ½ï¼Œå®é™…ä¸Šä¾é çš„æ˜¯ä¸€ä¸ªæ³¨å…¥è¿›é¡µé¢çš„ä»£ç†å®¢æˆ·ç«¯ä¸ devServer ä¹‹é—´çš„é€šä¿¡æ¥å®ç°çš„ã€‚å¦‚æœä½ å¼€å¯äº† inline æ¨¡å¼ï¼Œè¿™ä¸ªè„šæœ¬å°±ä¼šæ³¨å…¥è¿›ä½ çš„ bundle æ¥è´Ÿè´£ä¸ devServer é€šä¿¡ï¼Œæ„å»ºä¿¡æ¯ä¹Ÿä¼šå®æ—¶çš„æ˜¾ç¤ºåœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸Šã€‚</strong></p> <p>ç›¸åçš„ï¼Œå¦‚æœä½ è®¾ç½®æˆ falseï¼Œé‚£ä¹ˆ devServer å°†æ— æ³•ç›´æ¥æ§åˆ¶ä½ æ­£åœ¨å¼€å‘çš„ç½‘é¡µï¼Œè¿™æ—¶å€™å®ƒä¼šåœ¨ä½ çš„é¡µé¢ä¸ŠåŠ ä¸€ä¸ª iframeï¼Œé€šè¿‡ iframe çš„åˆ·æ–°æ¥å®ç°å®æ—¶é¢„è§ˆçš„æ•ˆæœã€‚ä¸è¿‡è¿™æ—¶å€™ä½ è¦é€šè¿‡ http://localhost:8080/webpack-dev-server/ å»è®¿é—®ä½ çš„åº”ç”¨ã€‚</p> <p><img src="/assets/img/inline.3d007868.png" alt="inline"></p> <p><strong>æ¨èé‡‡ç”¨é»˜è®¤å€¼ï¼Œå³ä½¿ç”¨ inline æ¨¡å¼æ¥å®æ—¶é¢„è§ˆã€‚</strong></p> <h3 id="public"><a href="#public" class="header-anchor">#</a> public</h3> <p>ä¸€èˆ¬ç”¨ä¸åˆ°ã€‚ä½†æ˜¯å¦‚æœä½ çš„æœ¬åœ°å¼€å¯äº†ä»£ç†ï¼Œå°†ä½ çš„æœåŠ¡è½¬å‘äº†å¦ä¸€ä¸ªåœ°å€ï¼Œé‚£ä¹ˆè¿™ä¸ªé…ç½®é¡¹å°±èµ·ä½œç”¨äº†ã€‚æ¯”å¦‚ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span><span class="token operator">:</span> <span class="token string">'mysite.com:9999'</span>
<span class="token punctuation">}</span>
</code></pre></div><p>é»˜è®¤æ‰“å¼€çš„åœ°å€å°±æ˜¯ mysite.com:9999 äº†ã€‚</p> <p><img src="/assets/img/public.c5c2688d.png" alt="public"></p> <h3 id="publicpath-ğŸ”‘"><a href="#publicpath-ğŸ”‘" class="header-anchor">#</a> publicPath ğŸ”‘</h3> <p>è¿™ä¸ªæ˜¯ç”¨æ¥é…ç½®ä½ æ‰“åŒ…åçš„æ–‡ä»¶è·¯å¾„çš„ã€‚æ¯”å¦‚ä½ çš„æœåŠ¡å™¨è¿è¡Œåœ¨ http://localhost:8080 ä¸Šï¼Œç„¶å <code>output.filename</code> è®¾ç½®ä¸º bundle.jsã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>devServer.publicPath</code> ä¸º '/'ï¼Œæ‰€ä»¥ä½ å¯ä»¥é€šè¿‡ http://localhost:8080/bundle.js æ¥è®¿é—®ä½ æ‰“åŒ…åçš„æ–‡ä»¶ã€‚</p> <p>ä½ ä¹Ÿå¯ä»¥è‡ªå·±è®¾ç½®å…·ä½“çš„è·¯å¾„ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
  publicPath<span class="token operator">:</span> <span class="token string">'/assets/'</span>
  <span class="token comment">// publicPath: ''</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¯ä»¥çœ‹ä¸€ä¸‹æ—¥å¿—ï¼š</p> <p><img src="/assets/img/public_path.1157d8fd.png" alt="public path"></p> <p>è¿™æ—¶å€™ä½ åº”è¯¥é€šè¿‡ http://localhost:8080/assets/index.html æ¥è®¿é—®é¡µé¢ï¼Œä½ çš„ bundle.js æ–‡ä»¶ä¹Ÿæ˜¯åœ¨ http://localhost:8080/assets/ è¿™ä¸ªç›®å½•ä¸‹ã€‚</p> <p>æˆ‘ä»¬å¯ä»¥å°† public å’Œ publicPath ç»“åˆèµ·æ¥é…ç½®ï¼Œä¾‹å¦‚ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
  port<span class="token operator">:</span> <span class="token number">8888</span><span class="token punctuation">,</span>
  <span class="token keyword">public</span><span class="token operator">:</span> <span class="token string">'localhost:8888/assets'</span><span class="token punctuation">,</span>
  publicPath<span class="token operator">:</span> <span class="token string">'/assets/'</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/assets/img/public_and_path.0a62be8e.png" alt="public and public path"></p> <p>æœ‰ä¸¤ç‚¹éœ€è¦æ³¨æ„ä¸€ä¸‹ï¼š</p> <ol><li>publicPath çš„å€¼æ°¸è¿œè¦ä»¥ / å¼€å¤´ï¼Œä»¥ / ç»“å°¾</li> <li><strong>publicPath çš„å€¼æœ€å¥½å’Œ output.path ä¿æŒä¸€è‡´</strong></li></ol> <h3 id="https"><a href="#https" class="header-anchor">#</a> https</h3> <p>è®¾ç½®ä¸º true è¡¨ç¤ºå¼€å¯ httpsã€‚ä½ ä¹Ÿå¯ä»¥æŒ‡å®šè‡ªå·±çš„è¯ä¹¦ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
  https<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  key<span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'/path/to/server.key'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  cert<span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'/path/to/server.crt'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  ca<span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'/path/to/ca.pem'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="http2"><a href="#http2" class="header-anchor">#</a> http2</h3> <p>å®ƒæ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦å¼€å¯ http2 ä¼ è¾“ï¼ˆåŸºäºspdyï¼‰ã€‚<strong>è¿™ä¸ªå±æ€§åœ¨ node v10+ ä¸Šæ— æ•ˆã€‚</strong></p> <h3 id="index"><a href="#index" class="header-anchor">#</a> index</h3> <p>æ‰“å¼€çš„ index æ–‡ä»¶çš„åç§°ã€‚é»˜è®¤æ˜¯ index.htmlã€‚å½“ä½ é»˜è®¤çš„æ–‡ä»¶åä¸æ˜¯ index.html çš„æ—¶å€™ï¼ŒæŒ‡å®šå®ƒä¼šå¾ˆæœ‰ç”¨ï¼Œæ¯”å¦‚ç»“åˆ HtmlWebpackPlugin æ¥é…ç½®ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">'DevServer Test'</span><span class="token punctuation">,</span>
      filename<span class="token operator">:</span> <span class="token string">'hello.html'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    index<span class="token operator">:</span> <span class="token string">'hello.html'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™æ ·çš„é…ç½®èƒ½ä¿è¯æˆ‘ä»¬æ­£ç¡®çš„æ‰“å¼€ index æ–‡ä»¶ã€‚</p> <h3 id="allowedhosts"><a href="#allowedhosts" class="header-anchor">#</a> allowedHosts</h3> <p>é…ç½®å“ªäº›ä¸»æœºè®¿é—®æˆ‘ä»¬çš„æœåŠ¡ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
  allowedHosts<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'baidu.com'</span><span class="token punctuation">,</span>
    <span class="token string">'.hello.com'</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="disablehostcheck"><a href="#disablehostcheck" class="header-anchor">#</a> disableHostCheck</h3> <p>è®¾ç½®ä¸º true çš„è¯è¡¨ç¤ºç¦ç”¨ä¸»æœºæ£€æŸ¥ï¼Œè¿™æ—¶å€™ä½ å¯ä»¥æ¥æ”¶æ¥è‡ªä»»æ„ä¸»æœºçš„è¯·æ±‚ã€‚<strong>éå¸¸ä¸æ¨èè®¾ç½®ä¸º trueï¼Œå› ä¸ºè¿™å®¹æ˜“è®©ä½ æ”¶åˆ° DNS é‡ç»‘å®šæ”»å‡»ã€‚</strong></p> <h3 id="host-ğŸ”‘"><a href="#host-ğŸ”‘" class="header-anchor">#</a> host ğŸ”‘</h3> <p>æŒ‡å®šè¦ä½¿ç”¨çš„ä¸»æœºã€‚</p> <p>è¿™ä¸ªé…ç½®éå¸¸æœ‰ç”¨ï¼Œé¡¹ç›®å¼€å‘çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¸¸å¸¸é‡åˆ°è¿™æ ·çš„æƒ…å†µï¼Œä½ æœ¬åœ°æ”¹äº†ä¸€ä¸ªä¸œè¥¿ï¼Œè¿˜æ²¡ä¸Šæµ‹è¯•ç¯å¢ƒï¼Œæƒ³è®©åˆ«äººå…ˆçœ‹çœ‹æ•ˆæœï¼Œä½ å°±éœ€è¦åˆ«äººè®¿é—®ä½ ç”µè„‘ä¸Šè¿è¡Œçš„åº”ç”¨ï¼Œè¿™æ—¶ä½ éœ€è¦é…ç½®ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
  host<span class="token operator">:</span> <span class="token string">'0.0.0.0'</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½ å°†ä½ çš„ ip å‘ç»™ä½ çš„åŒäº‹ï¼Œå®ƒå°±å¯ä»¥é€šè¿‡ ip:port/path/to/app æ¥è®¿é—®ä½ ç”µè„‘ä¸Šçš„æœåŠ¡äº†ã€‚è¿™æ—¶å€™ä½ çš„ disableHostCheck éœ€è¦è®¾ç½®ä¸º trueï¼Œå› ä¸ºåˆ«äººæ˜¯é€šè¿‡ä½ çš„ ip æ¥è®¿é—®çš„ã€‚</p> <h3 id="uselocalip"><a href="#uselocalip" class="header-anchor">#</a> useLocalIp</h3> <p>æ˜¯å¦ä½¿ç”¨æœ¬åœ° ip æ‰“å¼€æµè§ˆå™¨ã€‚é»˜è®¤æ˜¯ falseã€‚</p> <p>è¦æƒ³è¿™ä¸ªå±æ€§èµ·ä½œç”¨ï¼Œä½ çš„ host å±æ€§è¦ä¹ˆæ˜¯æœ¬åœ°çš„ ipï¼Œè¦ä¹ˆæ˜¯ 0.0.0.0ã€‚è¿™ä¸ªå±æ€§å¾ˆå°‘ç”¨åˆ°ï¼Œå®åœ¨è¦é…ç½®çš„è¯ï¼Œå‚è€ƒå¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
  host<span class="token operator">:</span> <span class="token string">'0.0.0.0'</span><span class="token punctuation">,</span>
  useLocalIp<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="hot-ğŸ”‘"><a href="#hot-ğŸ”‘" class="header-anchor">#</a> hot ğŸ”‘</h3> <p>å¼€å¯çƒ­æ¨¡å—æ›´æ–°ï¼ˆHMRï¼‰</p> <h3 id="hotonly-ğŸ”‘"><a href="#hotonly-ğŸ”‘" class="header-anchor">#</a> hotOnly ğŸ”‘</h3> <p>å½“æ„å»ºå¤±è´¥çš„æ—¶å€™ï¼Œä¹Ÿä¸è¦åˆ·æ–°æµè§ˆå™¨ï¼Œä¾æ—§ä½¿ç”¨ HMRã€‚é€šå¸¸æˆ‘ä»¬ä¸€èµ·è®¾ç½®ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
  hot<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  hotOnly<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="contentbase-ğŸ”‘"><a href="#contentbase-ğŸ”‘" class="header-anchor">#</a> contentBase ğŸ”‘</h3> <p>æˆ‘ä»¬çŸ¥é“ï¼ŒdevServer é€šè¿‡ HTTP æœåŠ¡æš´éœ²å‡ºæ¥çš„æ–‡ä»¶åˆ†ä¸ºä¸¤ç±»ã€‚ä¸€ç±»æ˜¯ webpack æ‰“åŒ…å‡ºçš„æ–‡ä»¶ï¼Œä¸€ç±»æ˜¯æœ¬åœ°çš„é™æ€æ–‡ä»¶ã€‚å‰è€…æˆ‘ä»¬å¯ä»¥é€šè¿‡ publicPath æ¥æŒ‡å®šæœåŠ¡çš„åœ°å€ï¼Œåè€…å°±è¦é æˆ‘ä»¬çš„ contentBase æ¥æŒ‡å®šäº†ã€‚æ¯”å¦‚ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
  contentBase<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'public'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™å°±æŠŠé¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ public æ–‡ä»¶å¤¹ä½œä¸ºæœåŠ¡æ–‡ä»¶çš„è·¯å¾„äº†ã€‚å¦‚æœè¿™æ—¶å€™ä½ é¡¹ç›®æ ¹ç›®å½•ä¸‹æœ‰ä¸€ä¸ª public æ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å¤¹é‡Œæœ‰ä¸€ä¸ª hello.txt æ–‡ä»¶ï¼Œé‚£ä¹ˆä½ å°±å¯ä»¥é€šè¿‡ http://localhost:8091/hello.txt æ¥è®¿é—®è¿™ä¸ªæ–‡ä»¶äº†ã€‚</p> <p>å¦‚æœä½ æœ‰å¤šä¸ªæ–‡ä»¶å¤¹éœ€è¦æŒ‡å®šï¼Œä¹Ÿå¯ä»¥é…ç½®æˆæ•°ç»„ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
  contentBase<span class="token operator">:</span> <span class="token punctuation">[</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'assets'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="contentbasepublicpath-ğŸ”‘"><a href="#contentbasepublicpath-ğŸ”‘" class="header-anchor">#</a> contentBasePublicPath ğŸ”‘</h3> <p><strong>è¿™æ˜¯ webpack V5 æ–°å¢çš„ç‰¹æ€§ã€‚</strong> å®ƒç»™ä½ çš„ contentBase é‡Œé¢æœåŠ¡çš„å†…å®¹åŠ ä¸Šè®¿é—®å‰ç¼€ã€‚æ¯”å¦‚ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
  contentBase<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  contentBasePublicPath<span class="token operator">:</span> <span class="token string">'/ppp'</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½ åœ¨æµè§ˆå™¨çš„è®¿é—®è·¯å¾„å‰é¢å°±è¦åŠ ä¸Š ppp å‰ç¼€ï¼šhttp://localhost:8091/ppp/hello.txtã€‚å¦‚æœä½  contentBase é…ç½®çš„æ˜¯æ•°ç»„ï¼Œé‚£ä¹ˆä½ è¿™ä¸ªä¹Ÿè¦é…ç½®æˆå¯¹åº”çš„æ•°ç»„ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
  contentBase<span class="token operator">:</span> <span class="token punctuation">[</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'assets'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  contentBasePublicPath<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'/public'</span><span class="token punctuation">,</span> <span class="token string">'/assets'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="watchcontentbase"><a href="#watchcontentbase" class="header-anchor">#</a> watchContentBase</h3> <p>å‘Šè¯‰ dev-server å»ç›‘å¬ devServer.contentBase è·¯å¾„ä¸‹çš„æ–‡ä»¶ã€‚å¦‚æœè®¾ç½®ä¸ºå®ƒ true çš„è¯ï¼Œé‚£ä¹ˆè¯¥ç›®å½•ä¸‹ä»»æ„æ–‡ä»¶çš„ä¿®æ”¹éƒ½ä¼šå‡ºå‘é¡µé¢çš„åˆ·æ–°ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
  contentBase<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  watchContentBase<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ï¼ˆæˆ‘ç»“åˆä¸Šé¢çš„ hello.txt è¯•äº†ï¼Œæˆ‘ä¿®æ”¹ hello.txt æ–‡ä»¶åï¼Œé¡µé¢å¹¶æ²¡æœ‰åˆ·æ–°ã€‚ä¸çŸ¥é“æ˜¯å“ªé‡Œå‡ºäº†é—®é¢˜ï¼Œå¾…ç ”ç©¶ã€‚ï¼‰</p> <h3 id="watchoptions"><a href="#watchoptions" class="header-anchor">#</a> watchOptions</h3> <p>æ–‡ä»¶ç›‘å¬ç›¸å…³çš„æ§åˆ¶ã€‚å¯ä»¥å‚è€ƒ watchOptions ç« èŠ‚ï¼Œä»–ä»¬çš„é…ç½®æ˜¯ä¸€æ ·çš„ã€‚</p> <h3 id="headers"><a href="#headers" class="header-anchor">#</a> headers</h3> <p>ç»™æ‰€æœ‰çš„å“åº”æ·»åŠ å“åº”å¤´ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
  headers<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">'X-header'</span><span class="token operator">:</span> <span class="token string">'This is custom header'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç»“æœï¼š</p> <p><img src="/assets/img/headers.ce2cc8d5.png" alt="headers"></p> <h3 id="livereload"><a href="#livereload" class="header-anchor">#</a> liveReload</h3> <p>æ§åˆ¶æµè§ˆå™¨æ˜¯å¦å®æ—¶åˆ·æ–°ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ç›‘æµ‹åˆ°æ–‡ä»¶æ”¹å˜æ—¶ï¼Œdev-server ä¼šåˆ·æ–°é¡µé¢ã€‚è¦æƒ³ liveReload ç”Ÿæ•ˆçš„è¯ï¼ŒdevServer.hot è¦ä¸º falseï¼Œæˆ–è€… devServer.watchContentBase ä¸º trueã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
  liveReload<span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="socket-ç›¸å…³"><a href="#socket-ç›¸å…³" class="header-anchor">#</a> socket ç›¸å…³</h3> <p>è¿™ä¸ªæˆ‘ä»¬å‡ ä¹å¾ˆå°‘å»é…ç½®ï¼Œåšä¸€ä¸ªäº†è§£å³å¯ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
  socket<span class="token operator">:</span> <span class="token string">'socket'</span><span class="token punctuation">,</span> <span class="token comment">// è¦ç›‘å¬çš„ Unix socket</span>
  sockHost<span class="token operator">:</span> <span class="token string">'mysocket.test'</span><span class="token punctuation">,</span> <span class="token comment">// å‘Šè¯‰è¿æ¥åˆ° devServer çš„å®¢æˆ·ç«¯ä½¿ç”¨æä¾›çš„ socket ä¸»æœº</span>
  sockPath<span class="token operator">:</span> <span class="token string">'/mysocket'</span><span class="token punctuation">,</span> <span class="token comment">// è®¿é—® socket çš„è·¯å¾„</span>
  sockPort<span class="token operator">:</span> <span class="token number">8080</span> <span class="token comment">// å‘Šè¯‰å®¢æˆ·ç«¯ä½¿ç”¨è¿™ä¸ªç«¯å£å»è¿æ¥ devServer</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="historyapifallback-ğŸ”‘"><a href="#historyapifallback-ğŸ”‘" class="header-anchor">#</a> historyApiFallback ğŸ”‘</h3> <p>å½“ä½¿ç”¨ HTML5 History API çš„æ—¶å€™ï¼Œindex.html è¿˜è¦æ‰¿è½½ç€ 404 çš„è¯·æ±‚ã€‚é€šè¿‡è®¾ç½®è¿™ä¸ªå±æ€§ä¸º true å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
  historyApiFallback<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™æ—¶å€™ï¼Œä½ è®¿é—®ä¸€ä¸ªä¸å­˜åœ¨çš„è·¯å¾„ï¼Œä¹Ÿä¼šå»è¯·æ±‚ index.html æ–‡ä»¶çš„å†…å®¹ã€‚</p> <p>è¿™ä¸ªå±æ€§è¿˜æ”¯æŒæ›´é«˜çº§çš„é…ç½®ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
  historyApiFallback<span class="token operator">:</span> <span class="token punctuation">{</span>
    rewrites<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> <span class="token keyword">from</span><span class="token operator">:</span> <span class="token regex">/^\/$/</span><span class="token punctuation">,</span> to<span class="token operator">:</span> <span class="token string">'/views/landing.html'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token keyword">from</span><span class="token operator">:</span> <span class="token regex">/^\/subpage/</span><span class="token punctuation">,</span> to<span class="token operator">:</span> <span class="token string">'/views/subpage.html'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token keyword">from</span><span class="token operator">:</span> <span class="token regex">/./</span><span class="token punctuation">,</span> to<span class="token operator">:</span> <span class="token string">'/views/404.html'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æœ‰å…´è¶£çš„è¯å¯ä»¥è‡ªå·±å°è¯•ä¸€ä¸‹ã€‚</p> <h3 id="proxy-ğŸ”‘"><a href="#proxy-ğŸ”‘" class="header-anchor">#</a> proxy ğŸ”‘</h3> <p>æƒ³å¿…è¿™ä¸ªå±æ€§å¤§å®¶éƒ½å¾ˆç†Ÿæ‚‰ï¼Œå¼€å‘è¿‡ç¨‹ä¸­ç»å¸¸ä¼šéœ€è¦é…ç½®å®ƒæ¥å®ç°è·¨åŸŸã€‚è¯¦ç»†çš„é…ç½®å¯ä»¥å‚è€ƒ <a href="https://github.com/chimurai/http-proxy-middleware#options" target="_blank" rel="noopener noreferrer">http-proxy-middleware<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> è¿™ä¸ªåŒ…ï¼Œè¿™é‡Œæˆ‘ä»¬ä»‹ç»å¸¸è§çš„å‡ ç§ã€‚</p> <p>å½“ä½ çš„åç«¯éƒ¨ç½²åœ¨ 35.123.18.192 ä¸Šçš„æ—¶å€™ï¼Œä½ å¯ä»¥è¿™ä¹ˆé…ç½®ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
  proxy<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">'/api'</span><span class="token operator">:</span> <span class="token string">'http://35.123.18.192'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™æ—¶å€™ï¼Œå¦‚æœåœ¨ä»£ç ä¸­è¯·æ±‚ /api/users ï¼Œè¿™ä¸ªè¯·æ±‚ä¼šè¢«ä»£ç†å‘é€åˆ° http://35.123.18.192/api/usersã€‚</p> <p>å½“ä½ ä¸æƒ³è¦å‘é€ /api è¿™ä¸ªå‰ç¼€çš„æ—¶å€™ï¼Œä½ å¯ä»¥ä½¿ç”¨ pathRewrite æ¥æ”¹æ‰å®ƒï¼Œè¿™æ—¶å€™è¦å°†è·¯å¾„å¯¹åº”çš„å€¼è®¾ç½®æˆå¯¹è±¡ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
  proxy<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">'/api'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        target<span class="token operator">:</span> <span class="token string">'http://35.123.18.192'</span><span class="token punctuation">,</span>
        pathRewrite<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string">'^/api'</span><span class="token operator">:</span> <span class="token string">''</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™é‡Œé…ç½®çš„ pathRewrite è¡¨ç¤ºï¼Œå¦‚æœä¸€ä¸ªè¯·æ±‚è·¯å¾„ä»¥ /api å¼€å¤´ï¼Œç»Ÿä¸€çš„å°† /api å»æ‰ï¼Œä¹Ÿå°±æ˜¯è¯´ <code>axios.get('/api/users/')</code> å®é™…ä¸Šä¼šå‘é€ï¼š<code>http://35.123.18.192/users</code> è¿™ä¸ªè¯·æ±‚ã€‚ä½ ä¹Ÿå¯ä»¥é€šè¿‡è¿™ä¸ª pathRewrite åšä¸€äº›æœ‰æ„æ€çš„äº‹ï¼Œæ¯”å¦‚è¿™ä¸ªåœºæ™¯ï¼šåç«¯æŸä¸ªæ¥å£æ²¡å†™å®Œï¼Œå®ƒè¦ç»™ä½ ä¸€ä¸ª mock æ¥å£ï¼Œä½ å°±å¯ä»¥åœ¨è¿™é‡Œé…ç½®é‡å†™è§„åˆ™äº†ï¼Œæ¯”å¦‚ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>pathRewrite<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string">'/users'</span><span class="token operator">:</span> <span class="token string">'/fake-users'</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¦‚æœä½ æƒ³ä»£ç†å¤šä¸ªè·¯å¾„åˆ°åŒä¸€ä¸ªç›®æ ‡æœåŠ¡å™¨ä¸Šï¼Œä½ è¿˜å¯ä»¥ä½¿ç”¨ context å±æ€§æ¥é…ç½®ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
  proxy<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    context<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'/auth'</span><span class="token punctuation">,</span> <span class="token string">'/api'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    target<span class="token operator">:</span> <span class="token string">'http://localhost:3000'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    context<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'/v2/auth'</span><span class="token punctuation">,</span> <span class="token string">'/v2/api'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    target<span class="token operator">:</span> <span class="token string">'http://localhost:4000'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨æ— æ•ˆè¯ä¹¦è¿è¡Œåœ¨HTTPSä¸Šçš„åç«¯æœåŠ¡å™¨å°†ä¸è¢«æ¥å—ã€‚å¦‚æœéœ€è¦ï¼Œå¯ä»¥åƒè¿™æ ·ä¿®æ”¹é…ç½®ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
  proxy<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">'/api'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      target<span class="token operator">:</span> <span class="token string">'https://xxx.com'</span><span class="token punctuation">,</span>
      secure<span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¦‚æœä½ æƒ³é€‰æ‹©æ€§çš„ä»£ç†ä¸€äº›è¯·æ±‚ï¼Œæ¯”å¦‚é’ˆå¯¹ API è¯·æ±‚èµ°ä»£ç†ï¼Œé’ˆå¯¹ html é¡µé¢è¯·æ±‚ä¸èµ°ä»£ç†ï¼Œä½ å¯ä»¥ä½¿ç”¨ bypass æ¥æ§åˆ¶è¿™ç§è¡Œä¸ºï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token function">bypass</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> proxy</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'html'</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Skipping proxy for browser request.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token string">'/index.html'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>bypass æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒçš„è§„åˆ™æ˜¯è¿™æ ·çš„ï¼š</p> <ul><li>å¦‚æœè¿”å› null æˆ–è€… undefinedï¼Œä½¿ç”¨ä»£ç†æ¥å¤„ç†è¯·æ±‚ï¼›</li> <li>å¦‚æœè¿”å› falseï¼Œé‚£ä¹ˆè¿™ä¸ªè¯·æ±‚ç»“æœä¸º 404</li> <li>è¿”å›ä¸€ä¸ªè·¯å¾„ï¼Œå°±å»è¯·æ±‚è¿™ä¸ªè·¯å¾„çš„èµ„æºï¼Œä¸èµ°ä»£ç†</li></ul> <p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒåŸå§‹çš„ Host å¤´æ˜¯è¢«ä¸€ç›´ä¿ç•™çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä»£ç†è¿‡å»çš„è¯·æ±‚å¤´ä¸­çš„ Host çš„å€¼æ˜¯æœ€åŸå§‹çš„ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘é…ç½®äº† proxy è®¿é—® 35.123.23.24 æœåŠ¡å™¨ã€‚åº”ç”¨åœ¨æœ¬åœ°è¿è¡Œåï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒdevServer å‘é€åˆ°è¿œç¨‹æœåŠ¡å™¨çš„è¯·æ±‚å¤´çš„ Host å­—æ®µï¼Œæ˜¯ localhostï¼Œä½†æ˜¯è¿™ä¸ªå¯¹äºè¿œç«¯æœåŠ¡å™¨æ¥è¯´ï¼Œå¯èƒ½ä¼šè¢«æ‹’ç»ã€‚æ‰€ä»¥æœ‰çš„æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥å°† changeOrigin è®¾ç½®ä¸º true æ¥ä¿®æ”¹è¿™ç§é»˜è®¤è¡Œä¸ºã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
  proxy<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">'/api'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      target<span class="token operator">:</span> <span class="token string">'http://35.123.23.23'</span><span class="token punctuation">,</span>
      changeOrigin<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">8/27/2020, 10:34:26 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/tools/webpack/output.html" class="prev">
        output
      </a></span> <span class="next"><a href="/tools/webpack/performance.html">
        performance
      </a>
      â†’
    </span></p></div> <div class="adsense-content" data-v-5abe131a><div style="padding: 2rem 2rem 1rem 2rem" data-v-5abe131a></div></div></main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.60e74413.js" defer></script><script src="/assets/js/14.69f023c0.js" defer></script><script src="/assets/js/2.720ba71e.js" defer></script><script src="/assets/js/6.95b28193.js" defer></script>
  </body>
</html>
